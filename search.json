[{"path":"/articles/Exampleanalysis.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Example analysis","text":"part, perform example data analysis R [@tidytuesday; @spotify_songs]. Objective: track popularity genre era? loudness songs relation energy index song Duration Playlist Genre Era Link original data: datasets part assignment comes TidyTuesday.","code":""},{"path":"/articles/Exampleanalysis.html","id":"get-the-data","dir":"Articles","previous_headings":"","what":"Get the data","title":"Example analysis","text":"Note echo = FALSE parameter added code chunk prevent printing R code generated plot. Let’s load data list full data dictionary column names mean.","code":"library(dplyr) library(tidyverse) library(ggplot2) library(lubridate) library(here) library(purrr) # Check if the data already exist if(!dir.exists(here(\"data\"))) { dir.create(here(\"data\")) }  if(!file.exists(here(\"data\",\"tuesdata_song.RDS\"))){   tuesdata <- tidytuesdayR::tt_load('2020-01-21')   spotify_songs <- tuesdata$spotify_songs        # save the files to RDS objects   saveRDS(tuesdata$spotify_songs, file = here(\"data\",\"tuesdata_song.RDS\")) } song<- readRDS(here(\"data\",\"tuesdata_song.RDS\"))"},{"path":"/articles/Exampleanalysis.html","id":"data-wrangling-using-purrr","dir":"Articles","previous_headings":"","what":"Data wrangling using purrr","title":"Example analysis","text":"","code":"# 1 demonstrate purrr. str_dat <- song |>    split(song$playlist_genre) |>   map(.f = ~mean(.x$danceability)) str_dat ## $edm ## [1] 0.6550409 ##  ## $latin ## [1] 0.7132873 ##  ## $pop ## [1] 0.6393017 ##  ## $`r&b` ## [1] 0.6701793 ##  ## $rap ## [1] 0.7183528 ##  ## $rock ## [1] 0.520548 song$temp_ener <- pmap_dbl(song,                      .f = function(tempo, energy, ...){                         tempo/energy                      }) songs_era <- song %>%    mutate(     track_album_release_date = as.Date(track_album_release_date),     year = as.numeric(format(track_album_release_date,'%Y')),     era = case_when(year <= 2000 ~ \"-2000\",                     year > 2000 & year <= 2010 ~ \"00-10\",                     year > 2010 ~ \"+2010\"),     duration_min = duration_ms/60000)"},{"path":"/articles/Exampleanalysis.html","id":"plots","dir":"Articles","previous_headings":"","what":"Plots","title":"Example analysis","text":"## plot 2","code":"f <- factor(c(\"2000\", \"00-10\", \"2010\"), levels = c(\"2000\", \"00-10\", \"2010\")) songs_era %>%   filter(!is.na(era)) %>%   group_by(playlist_genre, era) %>%   ggplot() +   geom_boxplot(aes(x=fct_inorder(era), track_popularity, fill=era), outlier.size=0) +   facet_wrap(~playlist_genre,nrow = 3) +    labs(x='Era',y=\"popularity\") +   theme_minimal() +   theme(legend.position = 'none')+   labs(title = \"Track Popularity by Era and Playlist Genre\",        subtitle = \"Data from Spotify\", caption = \"Tingxi Long\",        x='Era',        y=\"popularity\") fig2 <-song %>%   ggplot(aes(fill=playlist_genre,x=energy,y=loudness))+   geom_bar(stat='identity')+    labs(title =\"Loudness of songs in relation to its energy index\", subtitle =           \"EDM has the largest loudness\", caption = \"Tingxi Long\")+ylab(\"Loudness\")+xlab(\"Energy index\") fig2 # Select category=Asians. songs_era %>%   na.omit(era) %>%   ggplot(aes(x=playlist_genre,y=duration_min)) +   geom_violin(aes(fill=playlist_genre)) +   facet_grid(~fct_inorder(era)) +   theme_minimal() +   labs(x='Duration (min)') +   labs(title = \"Song Duration by Playlist Genre and Era\",        subtitle = \"Data from Spotify\", caption = \"Tingxi Long\",        x='Duration (min)') +   theme(legend.position = 'none')"},{"path":"/articles/Exampleanalysis.html","id":"use-plot-matrix","dir":"Articles","previous_headings":"","what":"Use Plot.matrix","title":"Example analysis","text":"","code":"index <- song[,c(\"danceability\",\"energy\",\"valence\",\"acousticness\")] cindex<-cor(index,use = \"complete.obs\") plot(as.assoc(cindex), col=topo.colors, main=\"My title\",      axis.col=list(side=1, las=1),axis.row=list(side=2, las=1),ann = FALSE) title(sub = \"My subtitle\") data(air.pvalue) plot(as.pvalue(air.pvalue),main=\"p values of airquality\",border=NA) title(sub = \"My subtitle\")"},{"path":"/articles/Exampleanalysis.html","id":"summary","dir":"Articles","previous_headings":"Use Plot.matrix","what":"Summary:","title":"Example analysis","text":"Generally, songs produced 2000-2010 lowest popularity. see constant decreasing popularity rock songs among 3 eras. EDM songs loud regardless energy index. Generally, song duration decreasing time. duration EDM songs larger variance 2000-2010.","code":"dplyr::   filter   group_by   arrange   mutate   case_when stringr::   string_detect ggplot:   geom_boxplot   geom_bar   geom_violin"},{"path":"/articles/plot.matrix.html","id":"general","dir":"Articles","previous_headings":"","what":"General","title":"Demonstration","text":"aim package plot.matrix visualize matrix heatmap. Automatic reordering rows columns done necessary. different similar function like heatmap. Additionally user-friendly give access lot options necessary. Currently package implements S3 functions can use generic plot function plot matrices heatmaps: plot.matrix heatmap plain matrix, plot.loadings heatmap loadings matrix factor analysis principal component analysis (reordering rows!). plot composed heatmap (usually left) colors represent matrix entries key (usually right) links colors values.","code":""},{"path":"/articles/plot.matrix.html","id":"first-examples","dir":"Articles","previous_headings":"General","what":"First examples","title":"Demonstration","text":"","code":"library('plot.matrix') # numeric matrix x <- matrix(runif(35), ncol=5) # create a numeric matrix object class(x) #> [1] \"matrix\" \"array\" par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(x) # logical matrix m <- matrix(runif(35)<0.5, ncol=7) plot(m) # text matrix s <- matrix(sample(letters[1:10], 35, replace=TRUE), ncol=5) plot(s) library('plot.matrix') library('psych') data <- na.omit(bfi[,1:25]) fa <- fa(data, 5, rotate=\"varimax\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(loadings(fa), cex=0.5)"},{"path":"/articles/plot.matrix.html","id":"assigning-colors-and-breaks","dir":"Articles","previous_headings":"General","what":"Assigning colors and breaks","title":"Demonstration","text":"plot.matrix uses command assignColors, also part plot.matrix, assigns value x color based parameters breaks, col na.col given. case numeric matrix breaks can number, giving number intervals covering range x, vector two numbers, given range cover 10 intervals, vector two numbers, specify interval borders case non-numeric vector breaks must contain values get color. breaks given sensible default chosen: case numeric vector derived pretty otherwise unique values/levels used. col can either vector colors function generates via col(n) set n colors. default use heat.colors.","code":""},{"path":"/articles/plot.matrix.html","id":"choosing-color-palettesfunctions","dir":"Articles","previous_headings":"General","what":"Choosing color palettes/functions","title":"Demonstration","text":"case want provide color palettes/functions plotting several good choices within R packages:  Source: Datanovia - Top R Color Palettes Know Great Data Visualization viridis viridisLite, RColorBrewer, ggplot2, ggsci, wesanderson, cetcolor, colormap, ColorPalette, colorr, colorRamps, dichromat, jcolors, morgenstemning, painter, paletteer, pals, Polychrome, qualpalr, randomcoloR, Redmonder.","code":""},{"path":"/articles/plot.matrix.html","id":"structure-of-the-plot","dir":"Articles","previous_headings":"General","what":"Structure of the plot","title":"Demonstration","text":"plot created several steps call plot command create basic plot draw colored polygons matrix entry polygon command necessary add value matrix entry text command polygon necessary draw x- y-axis axis command plot necessary draw key axis polygon command","code":""},{"path":"/articles/plot.matrix.html","id":"formal-parameters","dir":"Articles","previous_headings":"General","what":"Formal parameters","title":"Demonstration","text":"may influence appearance setting parameters: ... parameters given given plot command, e.g. xlab, ylab, …. polygon.cell list parameters drawing polygons matrix entries text.cell list parameters putting matrix entries texts axis.col axis.row list parameters drawing row column axes key, axis.key, spacing.key polygon.key draw key max.col determine text color background color near","code":""},{"path":"/articles/plot.matrix.html","id":"set-global-parameters","dir":"Articles","previous_headings":"General","what":"Set global parameters","title":"Demonstration","text":"may set global parameters subsequent calls axis, polygon text via .... following parameters supported","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins # omit all borders plot(x, border=NA)"},{"path":[]},{"path":"/articles/plot.matrix.html","id":"how-can-i-delete-the-grid-lines","dir":"Articles","previous_headings":"Frequently asked questions","what":"How can I delete the grid lines?","title":"Demonstration","text":"Use parameter border=NA.","code":""},{"path":"/articles/plot.matrix.html","id":"how-can-i-get-squared-boxes","dir":"Articles","previous_headings":"Frequently asked questions","what":"How can I get squared boxes?","title":"Demonstration","text":"Use parameter asp=TRUE.","code":""},{"path":"/articles/plot.matrix.html","id":"how-can-i-rotate-the-axis-labels-such-they-do-no-overlap","dir":"Articles","previous_headings":"Frequently asked questions","what":"How can I rotate the axis labels such they do no overlap?","title":"Demonstration","text":"Use parameter las, style axis labels, axis.coland/axis.row 0 = always parallel axis [default], 1 = always horizontal, 2 = always perpendicular axis, 3 = always vertical.","code":"x <- matrix(runif(35), ncol=5) # create a numeric matrix object par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins such that all labels are visible plot(x, axis.col=list(side=1, las=2), axis.row = list(side=2, las=1))"},{"path":"/articles/plot.matrix.html","id":"how-can-i-show-a-matrix-of-parameters-and-for-example-their-standard-errors-below","dir":"Articles","previous_headings":"Frequently asked questions","what":"How can I show a matrix of parameters and, for example, their standard errors below?","title":"Demonstration","text":"need access position cell text used accessing invisible return plot.matrix. cell.text contains parameters used draw text. Note double braces: [[,j]]  alternatively","code":"param_est <- matrix(runif(25), nrow=5) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins such that all labels are visible res <- plot(param_est, digits=2, text.cell=list(pos=3, cex=0.75)) sderr_est <- matrix(runif(25)/10, nrow=5) for (i in 1:nrow(param_est)) {   for (j in 1:ncol(param_est)) {       args <- res$cell.text[[i,j]]     args$labels <- paste0('(', fmt(sderr_est[i,j], 3), ')')     args$cex    <- 0.5     args$pos    <- 1     do.call(text, args)   } } param_est <- matrix(runif(25), nrow=5) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins such that all labels are visible res <- plot(param_est, digits=2, text.cell=list(cex=0.75)) sderr_est <- matrix(runif(25)/10, nrow=5) for (i in 1:nrow(param_est)) {   for (j in 1:ncol(param_est)) {       args <- res$cell.text[[i,j]]     args$labels <- paste0('(', round(sderr_est[i,j], 3), ')')     args$cex    <- 0.6     args$y      <- args$y-0.3     do.call(text, args)   } }"},{"path":"/articles/plot.matrix.html","id":"how-can-i-use-plot-matrix-and-the-default-scatter-plot-in-parallel","dir":"Articles","previous_headings":"Frequently asked questions","what":"How can I use plot.matrix and the default scatter plot in parallel?","title":"Demonstration","text":"example illustrates problem: loadings factor analysis plotted matrix factor scores scatter plot.","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins such that all labels are visible library(\"plot.matrix\") library(\"psych\") fa <- fa(iris[,-5], 2) #> Loading required namespace: GPArotation plot(fa$loadings) plot(fa$scores)"},{"path":"/articles/plot.matrix.html","id":"solution-1-convert-the-matrix-to-a-data-frame","dir":"Articles","previous_headings":"Frequently asked questions > How can I use plot.matrix and the default scatter plot in parallel?","what":"Solution 1: Convert the matrix to a data.frame","title":"Demonstration","text":"","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins such that all labels are visible fa <- fa(iris[,-5], nfactor=2) #> Loading required namespace: GPArotation plot(fa$loadings) plot(as.data.frame(fa$scores))"},{"path":"/articles/plot.matrix.html","id":"solution-2-use-plot-default","dir":"Articles","previous_headings":"Frequently asked questions > How can I use plot.matrix and the default scatter plot in parallel?","what":"Solution 2: Use plot.default","title":"Demonstration","text":"","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins such that all labels are visible fa <- fa(iris[,-5], nfactors=2) #> Loading required namespace: GPArotation plot(fa$loadings) plot.default(fa$scores)"},{"path":"/articles/plot.matrix.html","id":"solution-3-unload-the-package-plot-matrix-permanently","dir":"Articles","previous_headings":"Frequently asked questions > How can I use plot.matrix and the default scatter plot in parallel?","what":"Solution 3: Unload the package plot.matrix permanently","title":"Demonstration","text":"want use package plot.matrix plotting unload package including installed S3 functions devtools::unload","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins such that all labels are visible library(\"plot.matrix\") library(\"psych\") fa <- fa(iris[,-5], 2) #> Loading required namespace: GPArotation plot(fa$loadings) devtools::unload('plot.matrix') # Package devtools must be installed! plot(fa$scores)"},{"path":[]},{"path":"/articles/plot.matrix.html","id":"defaults","dir":"Articles","previous_headings":"Modifying a plot","what":"Defaults","title":"Demonstration","text":"default plot always draws heatmap key colors breaks determined entries x. case numeric matrix ten colors heat.colors chosen eleven breaks cover range entries equidistant grid. case non-numeric matrix unique element gets color determined heat.colors.","code":""},{"path":"/articles/plot.matrix.html","id":"modifying-the-breaks","dir":"Articles","previous_headings":"Modifying a plot","what":"Modifying the breaks","title":"Demonstration","text":"case numeric matrix breaks give interval borders color otherwise unique matrix entry breaks contain value. breaks given determined matrix object using pretty function base R.","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # we only want the range of x plot(x, breaks=range(x)) # we want seven colors plot(x, breaks=7) # user defined breaks, out-of-range entries are colored white plot(x, breaks=c(0.3,0.5,0.8))"},{"path":[]},{"path":"/articles/plot.matrix.html","id":"cell-colors","dir":"Articles","previous_headings":"Modifying a plot > Modifying the colors","what":"Cell colors","title":"Demonstration","text":"col parameter either vector colors used function mycolor(n) returns n colors request.     Note numeric matrices must hold length(breaks)==length(col)+1 non-numeric matrices length(breaks)==length(col).","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # use a color function plot(x, col=topo.colors) # user defined breaks and colors plot(x, col=c('red', 'green'), breaks=c(0, 0.5, 1)) # non-numeric matrix # assign colors plot(m, col=c('red', 'green')) # assign colors and breaks directly  plot(m, col=c('red', 'green'), breaks=c(TRUE, FALSE))"},{"path":"/articles/plot.matrix.html","id":"missing-values-and-out-of-range-matrix-entries","dir":"Articles","previous_headings":"Modifying a plot > Modifying the colors","what":"Missing values and out-of-range matrix entries","title":"Demonstration","text":"parameter na.col determines color missing values matrix entries outside current color scheme.","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins x[1,1] <- NA plot(x, col=topo.colors) plot(x, col=topo.colors, na.col=\"red\") plot(s, col=topo.colors, breaks=c('a', 'c', 'e', 'g', 'i'))"},{"path":[]},{"path":"/articles/plot.matrix.html","id":"delete-the-key","dir":"Articles","previous_headings":"Modifying a plot > Modifying the key","what":"Delete the key","title":"Demonstration","text":"deleting key set key=NULL:","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # delete key plot(x, key=NULL)"},{"path":"/articles/plot.matrix.html","id":"move-the-key","dir":"Articles","previous_headings":"Modifying a plot > Modifying the key","what":"Move the key","title":"Demonstration","text":"moving key different axis use key axis.key. Note warning issued axes rows, columns key side.  parameter spacing.key gives spacing plot key, width key spacing key axis. give vector length 1 2 missing values appended defaults c(1, 0.5, 0)  large matrix","code":"par(mar=c(5.1, 4.1, 5.1, 4.1))   # adapt margins # move key to the top and make axis text smaller plot(x, key=list(side=3, cex.axis=0.75), breaks=c(0,1)) par(mar=c(5.1, 4.1, 5.1, 4.1))   # adapt margins # move key to the top, make axis text smaller, and move key farther away from the plot plot(x, key=list(side=3, cex.axis=0.75), breaks=c(0,1), spacing.key=2) par(mar=c(5.1, 4.1, 5.1, 4.1))   # adapt margins xl  <- array(runif(1e4), c(1e2, 1e2)) brk <- 20 plot(xl, border=NA, breaks=brk, col=heat.colors(brk),       key=list(side=4,  font=2, cex.axis=0.75), fmt.key=\"%.2f\",       polygon.key=NULL, axis.key=NULL, spacing.key=c(3,2,2))"},{"path":"/articles/plot.matrix.html","id":"change-the-output-format-of-the-key-labels","dir":"Articles","previous_headings":"Modifying a plot > Modifying the key","what":"Change the output format of the key labels","title":"Demonstration","text":"can either use digits changes output format text. just want change output format key labels use fmt.key, e.g.   details format string see sprintf, non-numeric matrices %s used. Warning: format string passed OS’s sprintf function, incorrect formats can cause latter crash R process. R perform sanity checks format, possible user errors platforms tested, might terminal.","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # no plus sign plot(x, fmt.key=\"%.3f\", breaks=c(0,1))"},{"path":"/articles/plot.matrix.html","id":"modifying-the-row-and-column-axes","dir":"Articles","previous_headings":"Modifying a plot","what":"Modifying the row and column axes","title":"Demonstration","text":"default row axis drawn y-axis col axis drawn x-axis row column indices. matrix rownames(x) colnames(x) used. holds labels axes names(dimnames(x))empty.   moving, e.g. column axis top, use   drawing axes use","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins plot(x, xlab=\"my x label\", ylab=\"my y label\") # The HairEyeColor has its own names tab <- apply(HairEyeColor,1:2, sum) plot(tab) par(mar=c(5.1, 4.1, 5.1, 4.1))   # adapt margins plot(x, axis.col=list(side=3, cex.axis=0.7), axis.row=list(cex.axis=0.7)) # or alternatively set cex.axis for all axes and use abbreviated positioning plot(x, axis.col=3, cex.axis=0.7) par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins plot(x, axis.col=NULL, axis.row=NULL, xlab='', ylab='')"},{"path":"/articles/plot.matrix.html","id":"show-matrix-entries","dir":"Articles","previous_headings":"Modifying a plot","what":"Show matrix entries","title":"Demonstration","text":"can either use digits changes output format text. just want change output format key labels use fmt.cell, e.g. ","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # change all text output plot(x, digits=4, text.cell=list(cex=0.5)) # of alternatively use the global parameter cex plot(x, digits=4, cex=0.5) # change just matrix entries (no plus sign) plot(x, fmt.cell='%.2f')"},{"path":"/articles/plot.matrix.html","id":"na-handling","dir":"Articles","previous_headings":"Modifying a plot","what":"NA handling","title":"Demonstration","text":"Usually NA values matrix drawn white boxes determined value na.col parameter (default: white) matrix entries shown `NA  may enforce na.print printing NAs using replacement text   na.cell suppress printing matrix entries ","code":"x <- matrix(c(NA, 1, 2, 3), ncol=2) par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins plot(x, na.col='black', fmt.cell='%.0f') x <- matrix(c(NA, 1, 2, 3), ncol=2) par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins plot(x, na.col='black', fmt.cell='%.0f', na.print=FALSE) plot(x, na.col='black', fmt.cell='%.0f', na.print='Missing') x <- matrix(c(NA, 1, 2, 3), ncol=2) par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins plot(x, fmt.cell='%.0f', na.cell=FALSE)"},{"path":"/articles/plot.matrix.html","id":"automatic-text-color-adjustment","dir":"Articles","previous_headings":"Modifying a plot","what":"Automatic text color adjustment","title":"Demonstration","text":"may happen text color cell background color near means can read text anymore cell  default text color replaced black white (away)  Just replace text color colors nearer default max.col=70  farer away default  course, best solution choose good color scheme good text color ;)","code":"par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # Never replace text color by black or white plot(x, digits=2, text.cell=list(col=\"yellow\", cex=0.75), max.col=-1) par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins plot(x, digits=2, text.cell=list(col=\"yellow\", cex=0.75)) par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # In fewer cells the text color will be replaced by black plot(x, digits=2, text.cell=list(col=\"yellow\", cex=0.75), max.col=35) par(mar=c(5.1, 4.1, 4.1, 4.1))   # adapt margins # In more cells the text color will be replaced by black plot(x, digits=2, text.cell=list(col=\"yellow\", cex=0.75), max.col=140)"},{"path":"/articles/plot.matrix.html","id":"information-about-drawn-elements","dir":"Articles","previous_headings":"Modifying a plot","what":"Information about drawn elements","title":"Demonstration","text":"plot command returns invisibly list elements drawn, bit like hist. NULL entry means element drawn. data may useful adding elements graphic.  Available parameters cell.polygon, cell.text: polygon text used draw matrix element, key.polygon, key.axis: polygon axis used draw key element, plot, axis.col, axis.row: basic plot axes drawn.","code":"# numeric matrix x <- matrix(runif(35), ncol=5) # create a numeric matrix object par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins res <- plot(x) ##### names(res) #> [1] \"plot\"         \"cell.polygon\" \"cell.text\"    \"axis.col\"     \"axis.row\"     #> [6] \"key.axis\"     \"key.polygon\" # parameters of polygon which was used to draw x[3,4] res$cell.polygon[[3,4]] #> $y #> [1] 4.5 5.5 5.5 4.5 #>  #> $x #> [1] 3.5 3.5 4.5 4.5 #>  #> $col #> [1] \"#FF5500\" ##### # parameters of text which was used for x[3,4] res$cell.text[[3,4]]  # NULL since no text was drawn #> NULL ##### # parameters of polygon which was used to draw the second key element res$key.polygon[[2]]   #> $x #> [1] 6.0 6.0 6.5 6.5 #>  #> $y #> [1] 2.2 3.4 3.4 2.2 #>  #> $col #> [1] \"#FF5500\""},{"path":"/articles/plot.matrix.html","id":"example-add-shading-lines","dir":"Articles","previous_headings":"Modifying a plot > Information about drawn elements","what":"Example: Add shading lines","title":"Demonstration","text":"","code":"x <- matrix(runif(35), ncol=5) # create a numeric matrix object par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins res <- plot(x)  for (i in 1:length(res$cell.polygon)) {   args <- res$cell.polygon[[i]]   args$col     <- NA       # use no color   args$density <- 20*x[i]  # density depends on matrix entries   args$angle   <- 45          do.call(\"polygon\", args) }"},{"path":"/articles/plot.matrix.html","id":"example-adding-images","dir":"Articles","previous_headings":"Modifying a plot > Information about drawn elements","what":"Example: Adding images","title":"Demonstration","text":"Please note PNGs transparent background. depends graphic device transparency taken account.","code":"x <- matrix(runif(35), ncol=5) # create a numeric matrix object par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins res <- plot(x) # library(\"png\") # PNGs are created from wikimedia commons images, CC0 by C. Koltzenburg  # https://commons.wikimedia.org/wiki/File:C.Koltzenburg_-_smiley-yes.xcf # https://commons.wikimedia.org/wiki/File:C.Koltzenburg_-_smiley_no.xcf happy <- readPNG(system.file('png', 'happy.png', package=\"plot.matrix\")) sad   <- readPNG(system.file('png', 'sad.png', package=\"plot.matrix\"))  for (i in 1:length(res$cell.polygon)) {   args <- res$cell.polygon[[i]]   if (x[i]>0.5) {     rasterImage(happy, args$x[1]+0.1, args$y[1]+0.1, args$x[3]-0.1, args$y[2]-0.1)   } else {     rasterImage(sad, args$x[1]+0.1, args$y[1]+0.1, args$x[3]-0.1, args$y[2]-0.1)   } }"},{"path":"/articles/plot.matrix.html","id":"plotting-special-matrices","dir":"Articles","previous_headings":"","what":"Plotting special matrices","title":"Demonstration","text":"special matrices special plot routines: loadings factor analysis principal component analysis: plot.loadings correlations: plot.cor associations: plot.assoc p values: plot.pvalue plot routines support parameters gray grey gray scale image reorder reordering rows (default: reorder=TRUE) Note matrix columns reordered column names identical row names.","code":""},{"path":"/articles/plot.matrix.html","id":"loadings-matrix","dir":"Articles","previous_headings":"Plotting special matrices","what":"Loadings matrix","title":"Demonstration","text":"factor principal component analysis may want view loadings matrix. S3 function plot.loadings allows create heatmap loadings. differs plotting matrix color key ranges -1 1, breaks set c(-sqrt(c(1, 0.75, 0.5, 0.25, 0.16)), 0, sqrt(c(1, 0.75, 0.5, 0.25, 0.16))), matrix rows, corresponding variables, reordered (according breaks), matrix entries printed two digits comma. typical threshold factor analysis absolute loading greater equal 0.5; thus factor “explains” 25% variance variable. thresholds selected explain 50% 75% variable variance. Sometimes might useful check whether loadings little bit 0.5, therefore another threshold 0.4 added. parameters described Modifying plot can used plot.loadings well.","code":"library('plot.matrix') library('psych') data(bfi.2) fa <- fa(bfi.2, 5, rotate=\"varimax\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(loadings(fa), cex=0.5)"},{"path":"/articles/plot.matrix.html","id":"gray-scale","dir":"Articles","previous_headings":"Plotting special matrices > Loadings matrix","what":"Gray scale","title":"Demonstration","text":"using gray color scheme add gray=TRUEor grey=TRUE call","code":"library('plot.matrix') library('psych') data(bfi.2) fa <- fa(bfi.2, 5, rotate=\"varimax\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(loadings(fa), cex=0.5, gray=TRUE)"},{"path":"/articles/plot.matrix.html","id":"no-matrix-entries","dir":"Articles","previous_headings":"Plotting special matrices > Loadings matrix","what":"No matrix entries","title":"Demonstration","text":"printing loading entries use parameter digits:","code":"library('plot.matrix') library('psych') data(bfi.2) fa <- fa(bfi.2, 5, rotate=\"varimax\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(loadings(fa), digits=NA)"},{"path":"/articles/plot.matrix.html","id":"no-reordering-of-rows","dir":"Articles","previous_headings":"Plotting special matrices > Loadings matrix","what":"No reordering of rows","title":"Demonstration","text":"reordering variables use parameter reorder:","code":"library('plot.matrix') library('psych') data(bfi.2) fa <- fa(bfi.2, 5, rotate=\"varimax\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(loadings(fa), reorder=FALSE, cex=0.5)"},{"path":"/articles/plot.matrix.html","id":"correlations-and-associations","dir":"Articles","previous_headings":"Plotting special matrices","what":"Correlations and associations","title":"Demonstration","text":"S3 function plot.cor plot.assoc allow create heatmap coefficients. differs plotting matrix color key ranges -1 1 correlations 0 1 associations, breaks set reflect effect sizes given Cohen matrix rows, corresponding variables, reordered using dist hclust defaults rows, matrix entries printed two digits comma. parameters described Modifying plot can used plot.assoc plot.cor well.","code":"library('plot.matrix') data(Titanic.cramer) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.assoc(Titanic.cramer)) library('plot.matrix') library('datasets') c <- cor(airquality[,1:4], use=\"complete\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.cor(c))"},{"path":"/articles/plot.matrix.html","id":"gray-scale-1","dir":"Articles","previous_headings":"Plotting special matrices > Correlations and associations","what":"Gray scale","title":"Demonstration","text":"using gray color scheme add gray=TRUEor grey=TRUE call","code":"library('plot.matrix') data(Titanic.cramer) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.assoc(Titanic.cramer), gray=TRUE)"},{"path":"/articles/plot.matrix.html","id":"no-matrix-entries-1","dir":"Articles","previous_headings":"Plotting special matrices > Correlations and associations","what":"No matrix entries","title":"Demonstration","text":"printing loading entries use parameter digits:","code":"library('plot.matrix') data(Titanic.cramer) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.assoc(Titanic.cramer), digits=NA)"},{"path":"/articles/plot.matrix.html","id":"no-reordering-of-rows-1","dir":"Articles","previous_headings":"Plotting special matrices > Correlations and associations","what":"No reordering of rows","title":"Demonstration","text":"reordering variables use parameter reorder:","code":"library('plot.matrix') data(Titanic.cramer) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.assoc(Titanic.cramer), reorder=FALSE)"},{"path":"/articles/plot.matrix.html","id":"p-values","dir":"Articles","previous_headings":"Plotting special matrices","what":"P values","title":"Demonstration","text":"S3 function plot.pvalue allows create heatmap matrix p values. differs plotting matrix color key ranges 0 1 breaks set 0, 0.1, 0.05, 0.01, 0.001 1 matrix rows, corresponding variables, reordered using dist hclust defaults rows, matrix entries printed three digits comma. parameters described Modifying plot can used plot.pvalue well.","code":"library('plot.matrix') data(air.pvalue) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.pvalue(air.pvalue))"},{"path":"/articles/plot.matrix.html","id":"gray-scale-2","dir":"Articles","previous_headings":"Plotting special matrices > P values","what":"Gray scale","title":"Demonstration","text":"using gray color scheme add gray=TRUEor grey=TRUE call","code":"library('plot.matrix') data(air.pvalue) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.pvalue(air.pvalue), gray=TRUE)"},{"path":"/articles/plot.matrix.html","id":"no-matrix-entries-2","dir":"Articles","previous_headings":"Plotting special matrices > P values","what":"No matrix entries","title":"Demonstration","text":"printing loading entries use parameter digits:","code":"library('plot.matrix') data(air.pvalue) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.pvalue(air.pvalue), digits=NA)"},{"path":"/articles/plot.matrix.html","id":"no-reordering-of-rows-2","dir":"Articles","previous_headings":"Plotting special matrices > P values","what":"No reordering of rows","title":"Demonstration","text":"reordering variables use parameter reorder:","code":"library('plot.matrix') data(air.pvalue) par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(as.pvalue(air.pvalue), reorder=FALSE)"},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sigbert Klinke. Author, maintainer. Frédéric Chevalier. Contributor.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Klinke S (2022). plot.matrix: Visualizes Matrix Heatmap. R package version 1.6.2, https://CRAN.R-project.org/package=plot.matrix.","code":"@Manual{,   title = {plot.matrix: Visualizes a Matrix as Heatmap},   author = {Sigbert Klinke},   year = {2022},   note = {R package version 1.6.2},   url = {https://CRAN.R-project.org/package=plot.matrix}, }"},{"path":"/index.html","id":"plotmatrix","dir":"","previous_headings":"","what":"Visualizes a Matrix as Heatmap","title":"Visualizes a Matrix as Heatmap","text":"Visualizes matrix object plainly heatmap. provides single S3 function plot matrices, function assignColors assigns specific color value vector, specific functions loadings, correlation p-values matrices. View vignette GitHub installing ","code":"library(\"plot.matrix\") vignette(\"plot.matrix\")"},{"path":[]},{"path":"/index.html","id":"from-cran","dir":"","previous_headings":"","what":"From CRAN","title":"Visualizes a Matrix as Heatmap","text":"","code":"install.packages(\"plot.matrix\")"},{"path":"/index.html","id":"from-github","dir":"","previous_headings":"","what":"From github","title":"Visualizes a Matrix as Heatmap","text":"Note github install current development version.","code":"library(\"devtools\") install_github(\"sigbertklinke/plot.matrix\")"},{"path":[]},{"path":"/index.html","id":"plotmatrix-1","dir":"","previous_headings":"","what":"plot.matrix","title":"Visualizes a Matrix as Heatmap","text":"","code":"# you may need to adjust the margin sizes library(\"plot.matrix\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # default c(5.1, 4.1, 4.1, 2.1) # numeric matrix x <- matrix(runif(50), nrow=10) plot(x) plot(x, key=NULL) plot(x, key=list(cex.axis=0.5, tick=FALSE)) plot(x, digits=3) plot(x, breaks=c(0,1), digits=3, cex=0.6) # logical matrix m <- matrix(runif(50)<0.5, nrow=10) plot(m) plot(m, key=NULL, digits=1) # character matrix s <- matrix(sample(letters[1:10], 50, replace=TRUE), nrow=10) plot(s) plot(s, digits=10) plot(s, digits=10, col=heat.colors(5), breaks=letters[1:5])"},{"path":"/index.html","id":"plotloadings","dir":"","previous_headings":"","what":"plot.loadings","title":"Visualizes a Matrix as Heatmap","text":"","code":"# factor analysis library(\"psych\") data <- na.omit(bfi[,1:25])) # fa1 <- factanal(data, 5) plot(loadings(fa1)) # fa2 <- fa(data, 5) # psych::fa plot(loadings(fa2)) # principal component analysis library(\"psych\") data <- na.omit(bfi[,1:25])) #  pa <- princomp(data) plot(loadings(pa), digits=NA) # no numbers # pa <- prcomp(data) ld <- structure(pa$rotation, class=\"loadings\") plot(ld, digits=NA)"},{"path":"/index.html","id":"assigncolors","dir":"","previous_headings":"","what":"assignColors","title":"Visualizes a Matrix as Heatmap","text":"","code":"# numeric vector assignColors(runif(50)) # logical vector assignColors(runif(50)<0.5)  # character vector assignColors(sample(letters[1:10], 50, replace=TRUE))"},{"path":"/index.html","id":"history","dir":"","previous_headings":"","what":"History","title":"Visualizes a Matrix as Heatmap","text":"2022-01-23 Updated vignette FAQ/example, version 1.6.1 2021-04-26 Added spacing.key, Rmd-fying help, version 1.6 2020-11-10 Added two examples using plot results 2020-11-01 Version 1.5.2 cleaned documentation 2020-10-01 Version 1.5.0 added invisible return plot.matrix 2019-12-06 Version 1.4 2019-12-05 Extended treatment NAs, sorting loadings matrices changed 2019-09-16 Math annotation plot bug(?) 2019-07-09 Added data sets, gray scale support, text color change 2019-07-03 Added bfi data set, Version 1.2 2019-05-13 Version 1.1 2019-05-10 plot.loadings, error y-axis labelling 2018-12-20 Vignette, assignColors 2018-12-01 Added examples tables, extended formatting possibilities 2018-11-27 Version 1.0","code":""},{"path":"/reference/Titanic.cramer.html","id":null,"dir":"Reference","previous_headings":"","what":"Survival of passengers on the Titanic — Titanic.cramer","title":"Survival of passengers on the Titanic — Titanic.cramer","text":"Matrix Cramer's V computed variables economic status (class), sex, age survival  fate passengers fatal maiden voyage ocean liner 'Titanic'.","code":""},{"path":"/reference/Titanic.cramer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Survival of passengers on the Titanic — Titanic.cramer","text":"","code":"data(Titanic.cramer)"},{"path":"/reference/Titanic.cramer.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Survival of passengers on the Titanic — Titanic.cramer","text":"4x4 matrix Cramer's V computed Class 1st, 2nd, 3rd, Crew Sex Male, Female Age Child, Adult Survived , Yes","code":""},{"path":"/reference/Titanic.cramer.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Survival of passengers on the Titanic — Titanic.cramer","text":"data derived Survival passengers Titanic data set.","code":""},{"path":"/reference/Titanic.cramer.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Survival of passengers on the Titanic — Titanic.cramer","text":"","code":"data(Titanic.cramer) plot(as.assoc(Titanic.cramer))"},{"path":"/reference/air.pvalue.html","id":null,"dir":"Reference","previous_headings":"","what":"New York Air Quality Measurements — air.pvalue","title":"New York Air Quality Measurements — air.pvalue","text":"p-values pairwise correlation test complete-cases  daily air quality measurements New York, May September 1973.","code":""},{"path":"/reference/air.pvalue.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"New York Air Quality Measurements — air.pvalue","text":"","code":"data(air.pvalue)"},{"path":"/reference/air.pvalue.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"New York Air Quality Measurements — air.pvalue","text":"4x4 matrix p values pairwise correlation tests (cor.test). Ozone Ozone (ppb) Solar.R Solar R (lang) Wind Wind (mph) Temp Temperature (degrees F)","code":""},{"path":"/reference/air.pvalue.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"New York Air Quality Measurements — air.pvalue","text":"data derived New York Air Quality Measurements data set.","code":""},{"path":"/reference/air.pvalue.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"New York Air Quality Measurements — air.pvalue","text":"Chambers, J. M., Cleveland, W. S., Kleiner, B. Tukey, P. . (1983) Graphical Methods Data Analysis. Belmont, CA: Wadsworth.","code":""},{"path":"/reference/air.pvalue.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"New York Air Quality Measurements — air.pvalue","text":"","code":"data(air.pvalue) plot(as.pvalue(air.pvalue))"},{"path":"/reference/as.cor.html","id":null,"dir":"Reference","previous_headings":"","what":"as.XXX conversion functions — as.cor","title":"as.XXX conversion functions — as.cor","text":".XXX conversion functions","code":""},{"path":"/reference/as.cor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"as.XXX conversion functions — as.cor","text":"","code":"as.cor(x)  as.assoc(x)  as.pvalue(x)"},{"path":"/reference/as.cor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"as.XXX conversion functions — as.cor","text":"x numeric matrix: matrix convert","code":""},{"path":"/reference/as.cor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"as.XXX conversion functions — as.cor","text":"matrix appropriate class","code":""},{"path":"/reference/as.cor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"as.XXX conversion functions — as.cor","text":"","code":"# as.cor c <- cor(airquality, use=\"complete.obs\") # as.assoc # as.pvalue data(air.pvalue) plot(as.pvalue(air.pvalue))"},{"path":"/reference/assignColors.html","id":null,"dir":"Reference","previous_headings":"","what":"assignColors — assignColors","title":"assignColors — assignColors","text":"Assign value x color according choices breaks col.","code":""},{"path":"/reference/assignColors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"assignColors — assignColors","text":"","code":"assignColors(x, breaks = NULL, col = heat.colors, na.col = \"white\")"},{"path":"/reference/assignColors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"assignColors — assignColors","text":"x numeric non-numeric vector breaks vector breaks col vector colors color function na.col color NA --range values","code":""},{"path":"/reference/assignColors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"assignColors — assignColors","text":"vector color length x attributes breaks breaks used, col color coding na.col color NA --range entries","code":""},{"path":"/reference/assignColors.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"assignColors — assignColors","text":"Depending x numeric non-numeric vector colors  assigned value. case numeric vector breaks can number, giving number intervals covering range x, vector two numbers, given range cover 10 intervals, vector two numbers, specify interval borders case non-numeric vector breaks must contain values get color. breaks given sensible default choosen:  case numeric vector derived pretty  otherwise unique values/levels used. col can either vector colors function generates via col(n) set n colors. default use  heat.colors. Possible color functions R packages can found vignette('plot.matrix').","code":""},{"path":"/reference/assignColors.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"assignColors — assignColors","text":"","code":"## numeric vector x <- runif(10) assignColors(x) #>  [1] \"#FF5500\" \"#FFFF80\" \"#FFFF00\" \"#FFAA00\" \"#FF0000\" \"#FFAA00\" \"#FF5500\" #>  [8] \"#FFAA00\" \"#FF5500\" \"#FF5500\" #> attr(,\"breaks\") #> [1] 0.0 0.2 0.4 0.6 0.8 1.0 #> attr(,\"col\") #> [1] \"#FF0000\" \"#FF5500\" \"#FFAA00\" \"#FFFF00\" \"#FFFF80\" #> attr(,\"na.col\") #> [1] \"white\" # set breaks assignColors(x, breaks=15) #>  [1] \"#FF4600\" \"#FFFFD5\" \"#FFE800\" \"#FF8B00\" \"#FF2E00\" \"#FF8B00\" \"#FF5D00\" #>  [8] \"#FF8B00\" \"#FF5D00\" \"#FF7400\" #> attr(,\"breaks\") #>  [1] 0.00000000 0.06666667 0.13333333 0.20000000 0.26666667 0.33333333 #>  [7] 0.40000000 0.46666667 0.53333333 0.60000000 0.66666667 0.73333333 #> [13] 0.80000000 0.86666667 0.93333333 1.00000000 #> attr(,\"col\") #>  [1] \"#FF0000\" \"#FF1700\" \"#FF2E00\" \"#FF4600\" \"#FF5D00\" \"#FF7400\" \"#FF8B00\" #>  [8] \"#FFA200\" \"#FFB900\" \"#FFD100\" \"#FFE800\" \"#FFFF00\" \"#FFFF2A\" \"#FFFF80\" #> [15] \"#FFFFD5\" #> attr(,\"na.col\") #> [1] \"white\" assignColors(x, breaks=c(0,1)) #>  [1] \"#FF4900\" \"#FFFFBF\" \"#FFDB00\" \"#FF9200\" \"#FF2400\" \"#FF9200\" \"#FF4900\" #>  [8] \"#FF9200\" \"#FF6D00\" \"#FF6D00\" #> attr(,\"breaks\") #>  [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0 #> attr(,\"col\") #>  [1] \"#FF0000\" \"#FF2400\" \"#FF4900\" \"#FF6D00\" \"#FF9200\" \"#FFB600\" \"#FFDB00\" #>  [8] \"#FFFF00\" \"#FFFF40\" \"#FFFFBF\" #> attr(,\"na.col\") #> [1] \"white\" # set colors assignColors(x, col=c(\"red\", \"green\", \"blue\")) #>  [1] \"red\"   \"blue\"  \"blue\"  \"green\" \"red\"   \"green\" \"red\"   \"green\" \"red\"   #> [10] \"green\" #> attr(,\"breaks\") #> [1] 0.0000000 0.3333333 0.6666667 1.0000000 #> attr(,\"col\") #> [1] \"red\"   \"green\" \"blue\"  #> attr(,\"na.col\") #> [1] \"white\" assignColors(x, col=topo.colors) #>  [1] \"#004CFF\" \"#FFFF00\" \"#00FF4D\" \"#00E5FF\" \"#4C00FF\" \"#00E5FF\" \"#004CFF\" #>  [8] \"#00E5FF\" \"#004CFF\" \"#004CFF\" #> attr(,\"breaks\") #> [1] 0.0 0.2 0.4 0.6 0.8 1.0 #> attr(,\"col\") #> [1] \"#4C00FF\" \"#004CFF\" \"#00E5FF\" \"#00FF4D\" \"#FFFF00\" #> attr(,\"na.col\") #> [1] \"white\" # NA and out-of-range x[5] <- NA assignColors(x, breaks=seq(0.5, 1, by=0.1), na.col=\"red\") #>  [1] \"red\"     \"#FFFF80\" \"#FF5500\" \"red\"     \"red\"     \"red\"     \"red\"     #>  [8] \"red\"     \"red\"     \"red\"     #> attr(,\"breaks\") #> [1] 0.5 0.6 0.7 0.8 0.9 1.0 #> attr(,\"col\") #> [1] \"#FF0000\" \"#FF5500\" \"#FFAA00\" \"#FFFF00\" \"#FFFF80\" #> attr(,\"na.col\") #> [1] \"red\" ## logical vector l <- sample(c(NA, TRUE, FALSE), size=10, replace=TRUE) assignColors(l) #>  [1] \"white\"   \"#FFFF00\" \"#FFFF00\" \"#FFFF00\" \"white\"   \"#FF0000\" \"#FF0000\" #>  [8] \"white\"   \"white\"   \"white\"   #> attr(,\"breaks\") #> [1] \"FALSE\" \"TRUE\"  #> attr(,\"col\") #> [1] \"#FF0000\" \"#FFFF00\" #> attr(,\"na.col\") #> [1] \"white\" assignColors(l, breaks=c(\"FALSE\", \"TRUE\"), col=c(\"red\", \"blue\")) #>  [1] \"white\" \"blue\"  \"blue\"  \"blue\"  \"white\" \"red\"   \"red\"   \"white\" \"white\" #> [10] \"white\" #> attr(,\"breaks\") #> [1] \"FALSE\" \"TRUE\"  #> attr(,\"col\") #> [1] \"red\"  \"blue\" #> attr(,\"na.col\") #> [1] \"white\" ## character vector t <- sample(letters, size=10, replace=TRUE) assignColors(t) #>  [1] \"#FFFF00\" \"#FFDB00\" \"#FF0000\" \"#FFFFBF\" \"#FFB600\" \"#FF2400\" \"#FF6D00\" #>  [8] \"#FF9200\" \"#FF4900\" \"#FFFF40\" #> attr(,\"breaks\") #>  [1] \"a\" \"b\" \"e\" \"f\" \"j\" \"l\" \"r\" \"s\" \"w\" \"y\" #> attr(,\"col\") #>  [1] \"#FF0000\" \"#FF2400\" \"#FF4900\" \"#FF6D00\" \"#FF9200\" \"#FFB600\" \"#FFDB00\" #>  [8] \"#FFFF00\" \"#FFFF40\" \"#FFFFBF\" #> attr(,\"na.col\") #> [1] \"white\" assignColors(t, col=rainbow(5)) #>  [1] \"white\"   \"white\"   \"#FF0000\" \"white\"   \"white\"   \"#CCFF00\" \"#0066FF\" #>  [8] \"#CC00FF\" \"#00FF66\" \"white\"   #> attr(,\"breaks\") #> [1] \"a\" \"b\" \"e\" \"f\" \"j\" #> attr(,\"col\") #> [1] \"#FF0000\" \"#CCFF00\" \"#00FF66\" \"#0066FF\" \"#CC00FF\" #> attr(,\"na.col\") #> [1] \"white\""},{"path":"/reference/bfi.2.html","id":null,"dir":"Reference","previous_headings":"","what":"25 Personality items representing 5 factors — bfi.2","title":"25 Personality items representing 5 factors — bfi.2","text":"25 personality self report items taken International Personality Item Pool (ipip.ori.org) included  part Synthetic Aperture Personality Assessment (SAPA) web based personality assessment project.   contrast original data bfi library psych (version 1.8.12)  contains 25 personality self report items 2436 complete observations.","code":""},{"path":"/reference/bfi.2.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"25 Personality items representing 5 factors — bfi.2","text":"","code":"data(bfi.2)"},{"path":"/reference/bfi.2.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"25 Personality items representing 5 factors — bfi.2","text":"data frame 2436 observations following 25 variables (q numbers SAPA item numbers). A1 indifferent feelings others. (q_146) A2 Inquire others' well-. (q_1162) A3 Know comfort others. (q_1206) A4 Love children. (q_1364) A5 Make people feel ease. (q_1419) C1 exacting work. (q_124) C2 Continue everything perfect. (q_530) C3 things according plan. (q_619) C4 things half-way manner. (q_626) C5 Waste time. (q_1949) E1 talk lot. (q_712) E2 Find difficult approach others. (q_901) E3 Know captivate people. (q_1205) E4 Make friends easily. (q_1410) E5 Take charge. (q_1768) N1 Get angry easily. (q_952) N2 Get irritated easily. (q_974) N3 frequent mood swings. (q_1099 N4 Often feel blue. (q_1479) N5 Panic easily. (q_1505) O1 full ideas. (q_128) O2 Avoid difficult reading material.(q_316) O3 Carry conversation higher level. (q_492) O4 Spend time reflecting things. (q_1738) O5 probe deeply subject. (q_1964) 25 items organized five putative factors: Agreeableness, Conscientiousness, Extraversion, Neuroticism, Opennness. item data collected using 6 point response scale: 1 Inaccurate 2 Moderately Inaccurate 3 Slightly Inaccurate 4 Slightly Accurate 5 Moderately Accurate 6 Accurate part Synthetic Apeture Personality Assessment (SAPA https://www.sapa-project.org/) project.    see example data collection technique, visit https://www.sapa-project.org/   International Cognitive Ability Resource https://icar-project.com/. items given sampled   International Personality Item Pool Lewis Goldberg using sampling technique SAPA.    sample data set taken much larger SAPA data bank.","code":""},{"path":"/reference/bfi.2.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"25 Personality items representing 5 factors — bfi.2","text":"items ipip (Goldberg, 1999). data SAPA project  (Revelle, Wilt Rosenthal, 2010), collected Spring, 2010 ( https://www.sapa-project.org/).","code":""},{"path":"/reference/bfi.2.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"25 Personality items representing 5 factors — bfi.2","text":"bfi.2 data set items confused BFI (Big Five Inventory) Oliver John colleagues (John, O. P., Donahue, E. M., & Kentle, R. L. (1991). Big Five Inventory--Versions 4a 54. Berkeley, CA: University California,Berkeley, Institute Personality Social Research.)","code":""},{"path":"/reference/bfi.2.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"25 Personality items representing 5 factors — bfi.2","text":"Goldberg, L.R. (1999) broad-bandwidth, public domain, personality inventory measuring lower-level facets several five-factor models. Mervielde, . Deary, . De Fruyt, F. Ostendorf, F. (eds) Personality psychology Europe. 7. Tilburg University Press. Tilburg, Netherlands. Revelle, W., Wilt, J.,  Rosenthal, . (2010)  Individual Differences Cognition: New Methods examining Personality-Cognition Link Gruszka, .  Matthews, G. Szymura, B. (Eds.) Handbook Individual Differences Cognition: Attention, Memory Executive Control, Springer. Revelle, W,  Condon, D.M.,  Wilt, J.,  French, J.., Brown, .,   Elleman, L.G. (2016) Web phone based data collection using planned missing designs.  Fielding, N.G.,  Lee, R.M.  Blank, G. (Eds). SAGE Handbook Online Research Methods (2nd Ed), Sage Publcations.","code":""},{"path":"/reference/bfi.2.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"25 Personality items representing 5 factors — bfi.2","text":"","code":"data(bfi.2) library(\"psych\") fa <- fa(bfi.2, 5, rotate=\"varimax\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # adapt margins plot(loadings(fa), cex=0.5)"},{"path":"/reference/fmt.html","id":null,"dir":"Reference","previous_headings":"","what":"fmt — fmt","title":"fmt — fmt","text":"Rounds adds trailing zeros (default digits lower 4).","code":""},{"path":"/reference/fmt.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"fmt — fmt","text":"","code":"fmt(x, digits = 2L, zeros = digits < 4L, ...)"},{"path":"/reference/fmt.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"fmt — fmt","text":"Similar function fmt package exams. function round2 replaced round.","code":""},{"path":"/reference/fmt.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"fmt — fmt","text":"x numeric: vector. digits integer: Digits used rounding. zeros logical: trailing zeros added? ... passed format fmt.","code":""},{"path":"/reference/fmt.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"fmt — fmt","text":"formatted x text.","code":""},{"path":[]},{"path":"/reference/fmt.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"fmt — fmt","text":"","code":"## this is also employed internally in the fmt() formatting function fmt(c(0.005, 0.015)) #> [1] \"0.00\" \"0.01\"  ## the main purpose of fmt() is that some numeric result can be displayed ## both at high accuracy and then at the rounding that students should do ## (e.g., with 2 or 3 digits) sol <- runif(1) fmt(sol, 6) #> [1] \"0.591607\" fmt(sol, 2) #> [1] \"0.59\"  ## but fmt() also assures showing a very high number of significant digits ## (up to 12) sol <- 123456 + sol sol #> [1] 123456.6 fmt(sol, 6) #> [1] \"123456.591607\" fmt(sol, 2) #> [1] \"123456.59\"  ## and fmt() also takes care of adding trailing zeros (if digits < 4) fmt(1) #> [1] \"1.00\" fmt(1, digits = 3) #> [1] \"1.000\" fmt(1, digits = 6) #> [1] \"1\""},{"path":"/reference/plot.assoc.html","id":null,"dir":"Reference","previous_headings":"","what":"plot.assoc — plot.assoc","title":"plot.assoc — plot.assoc","text":"Visualizes association matrix colored gray heatmap. rule thumb breaks determined  effect sizes given  Cohen (c(-1, -0.4, -0.2, -0.05, 0, +0.05, +0.2, +0.4, +1).  may need modify mar par command default  c(5.1,4.1,4.1,2.1). See vignette('plot.matrix') detailed examples, plot.matrix parameters.","code":""},{"path":"/reference/plot.assoc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot.assoc — plot.assoc","text":"","code":"# S3 method for assoc plot(x, reorder = TRUE, gray = FALSE, grey = FALSE, ...)"},{"path":"/reference/plot.assoc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot.assoc — plot.assoc","text":"x matrix: association within [0,+1] reorder logical: rows (variables) loading matrix reordered (default: TRUE) gray logical: gray scale color palette used (default: FALSE) grey logical: gray scale color palette used (default: FALSE) ... parameter given plot.matrix command","code":""},{"path":"/reference/plot.assoc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"plot.assoc — plot.assoc","text":"plot","code":""},{"path":"/reference/plot.assoc.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"plot.assoc — plot.assoc","text":"either parameter grey gray TRUE gray color palette used.","code":""},{"path":"/reference/plot.assoc.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"plot.assoc — plot.assoc","text":"","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # association matrix data(Titanic.cramer) plot(as.assoc(Titanic.cramer))  plot(as.assoc(Titanic.cramer), gray=TRUE)  plot(as.assoc(Titanic.cramer[,1:3]), reorder=FALSE)"},{"path":"/reference/plot.cor.html","id":null,"dir":"Reference","previous_headings":"","what":"plot.cor — plot.cor","title":"plot.cor — plot.cor","text":"Visualizes correlation matrix colored gray heatmap. rule thumb breaks determined  effect sizes given  Cohen (c(-1, -0.4, -0.2, -0.05, 0, +0.05, +0.2, +0.4, +1).  may need modify mar par command default  c(5.1,4.1,4.1,2.1). See vignette('plot.matrix') detailed examples, plot.matrix parameters.","code":""},{"path":"/reference/plot.cor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot.cor — plot.cor","text":"","code":"# S3 method for cor plot(x, reorder = TRUE, gray = FALSE, grey = FALSE, ...)"},{"path":"/reference/plot.cor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot.cor — plot.cor","text":"x matrix: correlation within [-1,+1] reorder logical: rows (variables) loading matrix reordered (default: TRUE) gray logical: gray scale color palette used (default: FALSE) grey logical: gray scale color palette used (default: FALSE) ... parameter given plot.matrix command","code":""},{"path":"/reference/plot.cor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"plot.cor — plot.cor","text":"plot","code":""},{"path":"/reference/plot.cor.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"plot.cor — plot.cor","text":"either parameter grey gray TRUE gray color palette used.","code":""},{"path":"/reference/plot.cor.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"plot.cor — plot.cor","text":"","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # correlation matrix c <- cor(airquality[,1:4], use=\"pairwise\") plot(as.cor(c))  plot(as.cor(c), gray=TRUE)  plot(as.cor(c[,1:3]), reorder=FALSE)"},{"path":"/reference/plot.loadings.html","id":null,"dir":"Reference","previous_headings":"","what":"plot.loadings — plot.loadings","title":"plot.loadings — plot.loadings","text":"Visualizes loadings matrix Factor Analysis Principal Component Analysis matrix  gray colored heatmap. rule thumb breaks determined  c(-1, -0.866, -0.707, -0.5, -0.4, 0, +0.4, +0.5, +0.707, +0.866, +1) used. may need modify mar par command default  c(5.1,4.1,4.1,2.1). See vignette('plot.matrix') detailed examples, plot.matrix parameters.","code":""},{"path":"/reference/plot.loadings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot.loadings — plot.loadings","text":"","code":"# S3 method for loadings plot(x, reorder = TRUE, gray = FALSE, grey = FALSE, ...)"},{"path":"/reference/plot.loadings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot.loadings — plot.loadings","text":"x matrix: loadings reorder logical: rows (variables) loading matrix reordered (default: TRUE) gray logical: gray scale color palette used (default: FALSE) grey logical: gray scale color palette used (default: FALSE) ... parameter given plot.matrix command","code":""},{"path":"/reference/plot.loadings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"plot.loadings — plot.loadings","text":"plot","code":""},{"path":"/reference/plot.loadings.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"plot.loadings — plot.loadings","text":"either parameter grey gray TRUE gray color palette used.","code":""},{"path":"/reference/plot.loadings.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"plot.loadings — plot.loadings","text":"","code":"data(bfi.2) library(\"psych\") par(mar=c(5.1, 4.1, 4.1, 4.1)) # Factor analysis fa <- factanal(bfi.2, 5) plot(loadings(fa))  plot(loadings(fa), grey=TRUE)  # Principal Component Analysis I pa <- princomp(bfi.2) plot(loadings(pa), digits=NA)  # Principal Component Analysis II pa <- prcomp(bfi.2) ld <- structure(pa$rotation, class=\"loadings\")  plot(ld, digits=NA)"},{"path":"/reference/plot.matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"plot.matrix — plot.matrix","title":"plot.matrix — plot.matrix","text":"Visualizes matrix colored heatmap optionally color key. distinguishes numeric non-numeric matrices. may need modify mar graphics::par() command default c(5.1,4.1,4.1,2.1). see vignette vignette('plot.matrix')","code":""},{"path":"/reference/plot.matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot.matrix — plot.matrix","text":"","code":"# S3 method for matrix plot(   x,   y = NULL,   breaks = NULL,   col = heat.colors,   na.col = \"white\",   na.cell = TRUE,   na.print = TRUE,   digits = NA,   fmt.cell = NULL,   fmt.key = NULL,   spacing.key = c(1, 0.5, 0),   polygon.cell = NULL,   polygon.key = NULL,   text.cell = NULL,   key = list(side = 4, las = 1),   axis.col = list(side = 1),   axis.row = list(side = 2),   axis.key = NULL,   max.col = 70,   ... )"},{"path":"/reference/plot.matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot.matrix — plot.matrix","text":"x matrix y unused breaks breaks numeric values values col col vector colors function, e.g. grDevices::heat.colors()] one parameter n na.col color missing value (default: white) na.cell draw cells missing values (default: TRUE) na.print print NA (given characters) values missing. FALSE, nothing printed. na.cell FALSE, effect. digits number digits numeric data length string non-numeric data fmt.cell format string writing matrix entries, overwrites digits, defaults NULL fmt.key format string writing key entries, overwrites digits, defaults fmt spacing.key spacing plot legend, key width, spacing key axis  (default: c(1,0.5,0)) polygon.cell list parameters used graphics::polygon() heatmap polygon.key list parameters used graphics::polygon() key text.cell list parameters used graphics::text() matrix entries key list parameters used [graphics::axis(). set NULL information plotted. Instead key=list(side=4) may use key=4 key=\"right\". axis.col list parameters used graphics::axis() axis matrix columns. Instead axis.col=list(side=1) may use axis.col=1 axis.col=\"bottom\". axis.row list parameters used graphics::axis() axis matrix rows. Instead axis.row=list(side=2) may use axis.row=2 axis.col=\"left\". axis.key key max.col numeric: distance text color cell color smaller max.col either white black used text color, defaults 70 ... parameter given graphics::plot() command","code":""},{"path":"/reference/plot.matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"plot.matrix — plot.matrix","text":"invisibly list elements cell.polygon[[,j]] polygon parameters used draw elements matrix cell.text[[,j]] text parameters used draw elements matrix plot plot parameters used draw basic plot axis.col axis parameters used draw column axis axis.row axis parameters used draw row axis key.polygon[[]] polygon parameters used draw elements key key.axis axis parameters used draw key axis NULL means elements drawn.","code":""},{"path":"/reference/plot.matrix.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"plot.matrix — plot.matrix","text":"color key drawn either key (defaults list(cex=1)) fmt.key (defaults NULL) NULL. want plot matrix entries must set either digits fmt. non-numeric matrix digits gives length string printed, negative value results right-justified string. numeric matrix digits determines number decimal places,  negative value uses \"exponential\" decimal notation. may set format strings fmt fmt.key directly. Settings digits leads following format strings (n absolute value digits): colors given grDevices::heat.colors() used. Alternatively may specify color function delivers vector n colors called col(n). final colors breaks used depend plot.matrix gets numeric non-numeric matrix. Numeric matrix: general must hold length(col)+1==length(breaks). 1. breaks==NULL col==NULL colors taken heat.colors(10) eleven breaks calculated equidistant grid min(x) max(x). 2. breaks==NULL col color function Ten colors taken color function eleven breaks calculated equidistant grid min(x) max(x). 3. breaks==NULL col vector colors length(col)+1 breaks calculated equidistant grid min(x) max(x). 4. breaks given col==NULL colors taken heat.colors(length(breaks)-1). 5. breaks given col color function length(breaks)-1 colors taken color function. 6. breaks given col vector colors length(col)+1==length(breaks) holds length(col)+1 breaks calculated equidistant grid min(breaks) max(breaks). Non-numeric matrix: general must hold length(col)==length(breaks). first number unique elements x determined: nu. 1. breaks==NULL col==NULL colors taken heat.colors(nu) breaks set unique elements x. 2. breaks==NULL col color function nu colors taken color function breaks set unique elements x. 3. breaks==NULL col vector colors length(col) breaks calculated equidistant grid min(x) max(x). 4. breaks given color==NULL colors taken heat.colors(length(breaks)). 5. breaks given color color function length(breaks) colors taken color function. 6. breaks given color vector colors length(colors)==length(breaks) holds either breaks color shorten shorter . difference polygon color text color smaller max.col text color either white black (depending one away polygon color). distance computed \\(\\Delta C/3\\) https://en.wikipedia.org/wiki/Color_difference#Euclidean given.","code":""},{"path":"/reference/plot.matrix.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"plot.matrix — plot.matrix","text":"use fmt fmt.key restrictions use fmt base::sprintf(): format string passed OS's sprintf function, incorrect formats can cause latter crash R process. R perform sanity checks format, possible user errors platforms tested, might terminal.","code":""},{"path":"/reference/plot.matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"plot.matrix — plot.matrix","text":"","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # numeric matrix x <- matrix(runif(50), nrow=10) plot(x)  plot(x, key=NULL)  plot(x, key=list(cex.axis=0.5, tick=FALSE))  plot(x, digits=3)  plot(x, breaks=range(x), digits=3, cex=0.6)  # logical matrix m <- matrix(runif(50)<0.5, nrow=10) plot(m)  plot(m, col=c(\"red\", \"blue\"))  plot(m, key=NULL, digits=1)  # character matrix s <- matrix(sample(letters[1:10], 50, replace=TRUE), nrow=10) plot(s)  plot(s, col=topo.colors)  plot(s, digits=10)  plot(s, digits=1, col=heat.colors(5), breaks=letters[1:5])  plot(s, digits=1, col=heat.colors(5), breaks=c('a', 'c', 'e', 'g', 'i'))  # contingency table tab <- table(round(rnorm(100)), round(rnorm(100))) plot(unclass(tab))  # chisquare test residuals cst <- chisq.test(apply(HairEyeColor, 1:2, sum)) col <- colorRampPalette(c(\"blue\", \"white\", \"red\")) plot(cst$residuals, col=col, breaks=c(-7.5,7.5))  # triangular matrix x[upper.tri(x)] <- NA plot(x, digit=2)  plot(x, na.print=FALSE)  plot(x, na.cell=FALSE)  # use the standard plot instead of plot.matrix x <- matrix(runif(50), nrow=2) plot(as.data.frame(x))  plot.default(x)  if (FALSE) { # unload the package permanently with devtools library(\"devtools\") unload('plot.matrix') }"},{"path":"/reference/plot.pvalue.html","id":null,"dir":"Reference","previous_headings":"","what":"plot.pvalue — plot.pvalue","title":"plot.pvalue — plot.pvalue","text":"Visualizes matrix p-values colored gray heatmap. rule thumb breaks determined  c(0, 0.001, 0.01, 0.05, 0.1, 1) may need modify mar par command default  c(5.1,4.1,4.1,2.1). See vignette('plot.matrix') detailed examples, plot.matrix parameters.","code":""},{"path":"/reference/plot.pvalue.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"plot.pvalue — plot.pvalue","text":"","code":"# S3 method for pvalue plot(x, reorder = TRUE, gray = FALSE, grey = FALSE, ...)"},{"path":"/reference/plot.pvalue.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"plot.pvalue — plot.pvalue","text":"x matrix: p-values within [0,1] reorder logical: rows (variables) loading matrix reordered (default: TRUE) gray logical: gray scale color palette used (default: FALSE) grey logical: gray scale color palette used (default: FALSE) ... parameter given plot.matrix command","code":""},{"path":"/reference/plot.pvalue.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"plot.pvalue — plot.pvalue","text":"plot","code":""},{"path":"/reference/plot.pvalue.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"plot.pvalue — plot.pvalue","text":"either parameter grey gray TRUE gray color palette used.","code":""},{"path":"/reference/plot.pvalue.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"plot.pvalue — plot.pvalue","text":"","code":"par(mar=c(5.1, 4.1, 4.1, 4.1)) # correlation matrix data(air.pvalue) plot(as.pvalue(air.pvalue))  plot(as.pvalue(air.pvalue), gray=TRUE)  plot(as.pvalue(air.pvalue[,1:3]), reorder=FALSE)"}]
